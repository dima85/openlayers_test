<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.17.1/css/ol.css" type="text/css">
    <style>
      .map {
        height: 600px;
        width: 100%;
      }

      .ol-custom-overviewmap,
      .ol-custom-overviewmap.ol-uncollapsible {
        bottom: auto;
        left: auto;
        right: 0;
        top: 0;
      }

      .ol-custom-overviewmap:not(.ol-collapsed)  {
        border: 1px solid black;
      }

      .ol-custom-overviewmap .ol-overviewmap-map {
        border: none;
        width: 300px;
      }

      .ol-custom-overviewmap .ol-overviewmap-box {
        border: 2px solid red;
      }

      .ol-custom-overviewmap:not(.ol-collapsed) button{
        bottom: auto;
        left: auto;
        right: 1px;
        top: 1px;
      }

      .ol-rotate {
        top: 170px;
        right: 0;
      }

    </style>

    <script src="http://openlayers.org/en/v3.17.1/build/ol.js" type="text/javascript"></script>
    <!-- <script type="text/javascript" src="./scripts/map.js"></script>
 -->

    <title>OpenLayers 3 example</title>

  </head>
  <body>
    <h2>My Map</h2>
    <div id="map" class="map"></div>
    <form class="form-inline">
      <label>Geometry type &nbsp;</label>
      <select id="type">
        <option value="Point">Point</option>
        <option value="LineString">LineString</option>
        <option value="Polygon">Polygon</option>
      </select>
      <button onclick="readData(event)">Read</button>
    </form>



    <script type="text/javascript">

      var sizeX = 4096;
      var sizeY = 4096;
      var tileSize = 512;
      var tilesCountX = sizeX / tileSize;

      var pixelProj = new ol.proj.Projection({
        code: 'pixel',
        units: 'pixels',
        extent: [0, 0, sizeX, sizeY]
      });

      var projectionExtent = pixelProj.getExtent();

      var resolutions = [
        tilesCountX/4,
        tilesCountX/4/2,
        tilesCountX/4/4
      ];

      var tileGrid = new ol.tilegrid.TileGrid({
        origin: ol.extent.getTopLeft(projectionExtent),
        resolutions: resolutions,
        tileSize: tileSize
      });

      var source = new ol.source.XYZ({
        projection: pixelProj,
        wrapX: false,
        url: '/tile/{z}/{x}/{y}',
        tileGrid: tileGrid
      });

      var layer = new ol.layer.Tile({
        source: source
      });

      var view = new ol.View({
        zoom: 0,
        center: [sizeX/2, sizeY/2],
        projection: pixelProj
      });

      var map = new ol.Map({
        target: 'map',
        layers: [layer],
        view: view
      });


      // var projectionExtent = pixelProj.getExtent();

      // var resolutions = [
      //   tilesCountX/4,
      //   tilesCountX/4/2,
      //   tilesCountX/4/4
      // ];

      // var tileGrid = new ol.tilegrid.TileGrid({
      //   origin: ol.extent.getTopLeft(projectionExtent),
      //   resolutions: resolutions,
      //   tileSize: tileSize
      // });


      // var tileSource = new ol.source.XYZ({
      //   projection: pixelProj,
      //   wrapX: false,
      //   url: '/tile/{z}/{x}/{y}',
      //   tileGrid: tileGrid
      // });

      // var layer = new ol.layer.Tile({
      //   source: tileSource,
      //   extent: projectionExtent
      // });

      // var view = new ol.View({
      //   zoom: 0,
      //   center: [sizeX/2, sizeY/2],
      //   projection: pixelProj,
      //   extent: projectionExtent,
      //   resolutions: resolutions
      // });

      // var map = new ol.Map({
      //   target: 'map',
      //   layers: [layer],
      //   view: view,
      //   controls: ol.control.defaults({
      //     attributionOptions: /** @type {olx.control.AttributionOptions} */
      //     {
      //       collapsible: false
      //     }
      //   })
      //   .extend([
      //     //new ol.control.OverviewMap({collapsed: false}),
      //     new ol.control.ZoomSlider()
      //   ])
      // });

      var mousePositionControl = new ol.control.MousePosition({});

      map.addControl(mousePositionControl);

    </script>


  </body>
</html>
